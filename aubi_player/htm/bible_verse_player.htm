<!DOCTYPE html>
<html>

<head>
  <title>AudioBible</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  <META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">
  </META>
  <script src="https://wdingbox.github.io/ham12/jq/jquery-2_1_3.min.js"></script>

  <script src="https://wdingbox.github.io/bible_obj_lib/jsdb/jsBibleObj/NIV.json.js"></script>
  <script
    src="https://wdingbox.github.io/bible_obj_lib/jsdb/jsBibleVerseAudioRelativePos/VrsAudioRelativePosLen_NIV.json.js"></script>
  <script
    src="https://wdingbox.github.io/bible_obj_lib/jsdb/jsBibleVerseAudioRelativePos/Audio_Bible_Struct.js"></script>


  <script src="../jq/mPlayer.js"></script>
  <script src="bible_verse_player.js"></script>


  <style>
    body {}

    thead {
      display: block;
    }

    #myAudioFileNameSelect table,
    #myAudioFileNameSelect tr {
      width: 100%;
    }

    #myAudioFileNameSelect tbody {
      height: 500px;

      overflow-y: scroll;
      display: block;
    }

    .hilihead {
      background-color: grey;
    }

    .hili {
      background-color: red;
    }

    table input {
      width: 80px;
    }

    .sright {
      width: 100%;
      text-align: right;
    }

    .playedItm {
      border-style: solid;
      border-color: black;
      border-width: 1px;
    }
  </style>
  <script language="javascript">

    $(function () {

      $(".plusnum").on("click", function () {
        var inp = $(this).parent().find("input:eq(0)")
        var val = inp.val()
        inp.val(parseFloat(val) + 1)
      })

      $(".minusnum").on("click", function () {
        var inp = $(this).parent().find("input:eq(0)")
        var val = inp.val()
        inp.val(parseFloat(val) - 1)
      })


      $("#start_loop").on("click", function () {

        var dur_time = parseFloat($("#durat_float").val())
        var offset_time = parseFloat($("#offset_float").val())
        var start_time = offset_time + parseFloat($("#start_float").val())
        var stop_time = start_time + dur_time

        gvObj.src = $("#filename").val()
        gvObj.currentTime = start_time

        //alert(`gvObj.currentTime= ${gvObj.currentTime}=${start_time}+ ${offset_time}`)

        gvObj.play()
        gvObj.ontimeupdate = function () {
          if (gvObj.currentTime >= stop_time) {
            gvObj.pause()

            ////// loop after 3s. 
            setTimeout(function () {
              gvObj.currentTime = start_time
              gvObj.play()
            }, 3000)
          }
        }
      })

      $("#stop_loop").on("click", function () {
        var txt = "" + gvObj.currentTime
        txt += " = " + Util.convert_seconds_to_hhmmss(txt)
        $("#show_stop_time").text(txt)
        gvObj.pause()
      })


      $("#play_init").click(function(){
        gvObj
      })




    })////




  </script>

<body>



  <audio id="myAudio" controls autoplay="true" width="400" height="100">
    <source src="" type="audio/ogg">
    <source src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <hr />






  <button id="speedup" onclick="speedup(0.25);">+</button>
  <button id="speeddn" onclick="speedup(-0.25);">-</button>
  <a>x </a><a id="speed">1.0</a>
  <button id="start_loop">loop</button>
  <button id="stop_loop">stop</button>
  <button id="play_init">init</button>
  <a id="show_stop_time"></a>
  <br>



  <table>
    <tr>
      <td>
        <div class="sright">start</div>
      </td>
      <td>
        <button class="plusnum">+</button>
        <button class="minusnum">-</button>
        <input id="start_float" onclick="$('#start_hhmmss').val(Util.convert_seconds_to_hhmmss($(this).val()));"
          value="0.0" title="in seconds"></input>=<input id="start_hhmmss"
          onclick="$('#start_float').val(Util.convert_hhmmss_to_seconds($(this).val()));" value="00:00:00.00"
          title="hh:mm:ss."></input>
      </td>
    </tr>

    <tr>
      <td>
        <div class="sright">offset</div>
      </td>
      <td>
        <button class="plusnum">+</button>
        <button class="minusnum">-</button>
        <input id="offset_float" value="2"></input>
      </td>

    </tr>

    <tr>
      <td>
        <div class="sright">duration</div>
      </td>
      <td>
        <button class="plusnum">+</button>
        <button class="minusnum">-</button>

        <input id="durat_float" value="10"></input>
      </td>
    </tr>

  </table>

  <input id="filename" value="" size="1000"></input><br>

  <div id="playedBoard">...</div>



  <hr />


  <button id="Bk_Chp_gen">GenBibleTable</button>
  <table id="myAudioFileNameSelect" border='1'>
    <option></option>
    <thead>
      <th>Bk_Chp</th>
      <th>Verses</th>

    </thead>
    <tbody></tbody>
  </table><br>


</body>

</html>